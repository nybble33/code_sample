<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<h1>Drag and Drop</h1>

<div id='clickable' onclick='aaaa(this)'>22OLOLOLOOLO</div>


<div id='gismo' onclick='aaaa(this)'>
    <img src='/static/images/gismo_small.jpg' />
</div>

<div id='pirate1'>
    <img src='/static/images/pirate59.png' />
</div>
<div id='pirate2'>
    <img src='/static/images/pirate10.png' />
</div>
    <script>

//document.getElementById('clickable').onclick = 'aaaa()';// function(e){alert("Aaaaaa!!!!");}

function aaaa(e){
    alert('Ooooooo!!!'+e.innerHTML);
}

var ball = document.getElementById('pirate1');

ball.onmousedown = function(e) {

  var coords = getCoords(ball);
  var shiftX = e.pageX - coords.left;
  var shiftY = e.pageY - coords.top;

  ball.style.position = 'absolute';
  document.body.appendChild(ball);
  moveAt(e);

  ball.style.zIndex = 1000; // над другими элементами

  function moveAt(e) {
    ball.style.left = e.pageX - shiftX + 'px';
    ball.style.top = e.pageY - shiftY + 'px';
  }

  document.onmousemove = function(e) {
    moveAt(e);
  };

  ball.onmouseup = function() {
    document.onmousemove = null;
    ball.onmouseup = null;
  };

}

ball.ondragstart = function() {
  return false;
};



var ball1 = document.getElementById('pirate2');

ball1.onmousedown = function(e) {

  var coords = getCoords(ball1);
  var shiftX = e.pageX - coords.left;
  var shiftY = e.pageY - coords.top;

  ball1.style.position = 'absolute';
  document.body.appendChild(ball1);
  moveAt(e);

  ball1.style.zIndex = 1000; // над другими элементами

  function moveAt(e) {
    ball1.style.left = e.pageX - shiftX + 'px';
    ball1.style.top = e.pageY - shiftY + 'px';
  }

  document.onmousemove = function(e) {
    moveAt(e);
  };

  ball1.onmouseup = function() {
    document.onmousemove = null;
    ball1.onmouseup = null;
  };

}

ball1.ondragstart = function() {
  return false;
};

function getCoords(elem) {   // кроме IE8-
  var box = elem.getBoundingClientRect();
  return {
    top: box.top + pageYOffset,
    left: box.left + pageXOffset
  };
}



/*
var pirate = document.getElementById('pirate');

pirate.ondragstart = function() {
  return false;
};

pirate.onmousedown = function(e){

    pirate.style.position = 'absolute';
    moveAt(e);

    document.body.appendChild(pirate);

    pirate.style.zIndex = 10000;

    function moveAt(e){
        pirate.style.left = e.pageX - pirate.offsetWidth/2 + 'px';
        pirate.style.top = e.pageY - pirate.offsetHeight/2 + 'px';
    };

    document.onmousemove = function(e){
        moveAt(e);
    };

    pirate.onmouseup = function(){
        document.onmousemove = null;
        pirate.onmouseup = null;
    };

}

var ball = document.getElementById('pirate');

ball.onmousedown = function(e) { // 1. отследить нажатие

  // подготовить к перемещению
  // 2. разместить на том же месте, но в абсолютных координатах
  ball.style.position = 'absolute';
  moveAt(e);
  // переместим в body, чтобы мяч был точно не внутри position:relative
  document.body.appendChild(ball);

  ball.style.zIndex = 1000; // показывать мяч над другими элементами

  // передвинуть мяч под координаты курсора
  // и сдвинуть на половину ширины/высоты для центрирования
  function moveAt(e) {
    ball.style.left = e.pageX - ball.offsetWidth / 2 + 'px';
    ball.style.top = e.pageY - ball.offsetHeight / 2 + 'px';
  }

  // 3, перемещать по экрану
  document.onmousemove = function(e) {
    moveAt(e);
  }

  // 4. отследить окончание переноса
  ball.onmouseup = function() {
    document.onmousemove = null;
    ball.onmouseup = null;
  }
}*/
    </script>
</body>
</html>
